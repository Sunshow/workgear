# 5. 验收标准

## 5.1 功能验收

- ✅ 可创建项目和看板
- ✅ 可创建 Task 并启动流程
- ✅ ClaudeCode 可执行 agent_task 节点
- ✅ 人工可 Review 并 approve/reject/edit
- ✅ 打回后流程可重新执行（次数按节点配置的 `max_loops`）
- ✅ 产物自动创建并关联到 Task
- ✅ 产物版本可查看和对比
- ✅ 流程状态实时推送到前端
- ✅ 消息时间线记录完整过程
- ✅ Git 分支自动创建
- ✅ 可从 4 个内置模板创建流程
- ✅ 模板参数表单可正确渲染模板
- ✅ YAML 编辑器支持语法高亮和实时校验
- ✅ 右侧 DAG 预览可正确展示节点和边
- ✅ 保存后的流程可在 Task 启动时选择

## 5.2 性能验收

- 流程启动响应时间 p95 < 2s
  - 测试条件：并发 20 FlowRun（同一项目），数据库已有 ≥ 1 万条 timeline_events（全局），单个 Task 历史 ≥ 100 条事件
- WebSocket 消息端到端延迟 p95 < 500ms（同可用区内）
- 看板拖拽操作响应 p95 < 100ms（单项目 200+ Task）

## 5.3 稳定性验收

- Agent 执行失败可自动重试（最多 3 次）
- 服务重启后可恢复执行中的流程
- 数据库事务保证一致性
- 取消/重试/恢复接口满足幂等性（重复调用不产生重复执行）

## 5.4 异常场景验收

- Agent 超时可被正确终止并记录失败原因
- Reject 超过 `max_loops` 后流程终止并提示人工处理
- WebSocket 断连恢复后，时间线可通过 REST 补齐且无重复事件
